<app-sidebar></app-sidebar>

<div class="container-fluid background p-4">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="card p-4 shadow-sm border-0 perfil-card">
        <div class="edit-body">
          <h3>Cadastro de Coordenador</h3>
          <div class="linha"></div>

          <form [formGroup]="cadastroCoordenadorForm" (ngSubmit)="onSubmit()">

            <!-- DADOS DE ACESSO -->
            <div class="mb-3">
              <label class="form-label" for="nome">Nome</label>
              <input
                type="text"
                id="nome"
                formControlName="nome"
                class="form-control"
              />
              @if(hasError('nome', 'required')){
                <small class="error-message">Nome é obrigatório.</small>
              }
            </div>

            <div class="mb-3">
              <label class="form-label" for="email">Email</label>
              <input
                type="email"
                id="email"
                formControlName="email"
                class="form-control"
              />
              @if(hasError('email', 'required')){
                <small class="error-message">Email é obrigatório.</small>
              }
              @if(hasError('email', 'email')){
                <small class="error-message">Formato de email inválido.</small>
              }
            </div>

            <div class="mb-3">
              <label class="form-label" for="senha">Senha</label>
              <input
                type="password"
                id="senha"
                formControlName="senha"
                class="form-control"
              />
              @if(hasError('senha', 'required')){
                <small class="error-message">Senha é obrigatória.</small>
              }
              @if(hasError('senha', 'minlength')){
                <small class="error-message">A senha deve ter no mínimo 6 caracteres.</small>
              }
            </div>

            <div class="linha"></div>

            <!-- VÍNCULO COM CURSOS -->
            <div class="mb-3">
              <label class="form-label" for="cursos">Cursos Disponíveis</label>
              <div class="checkbox-group">
                <div *ngFor="let curso of cursosDisponiveis" class="checkbox-item">
                  <input
                    type="checkbox"
                    id="curso-{{ curso.id }}"
                    [value]="curso.id"
                    [checked]="cursosFormArray.value.includes(curso.id)"
                    (change)="onCheckboxChange($event)"
                  />
                  <label for="curso-{{ curso.id }}">{{ curso.nome }}</label>
                </div>
              </div>
              @if(hasError('cursos', 'required')){
                <small class="error-message">Selecione pelo menos um curso.</small>
              }
            </div>

            <div class="linha"></div>

            <!-- BOTÕES -->
            <div class="d-flex justify-content-between mt-4">
              <button type="button" class="btn btn-back" (click)="goToLanding()">Voltar à Home</button>
              <button type="submit" class="btn btn-color"><b>Finalizar Cadastro</b></button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</div>
