<div class="pagina-container">
  <div class="card padrao shadow">
    <h2 class="titulo-pagina">Criar Grupo</h2>

    <form class="formulario">
      <!-- Nome do Grupo -->
      <div class="campo">
        <label for="group-name">Nome do Grupo</label>
        <input
          id="group-name"
          type="text"
          placeholder="Digite o nome do grupo"
          [(ngModel)]="nomeGrupo"
          name="nomeGrupo"
        />
      </div>

      <!-- Período -->
      <div class="campo">
        <label for="periodo">Selecione o Período</label>
        <select id="periodo" [(ngModel)]="periodoSelecionado" name="periodo">
          @for (periodo of periodosDisponiveis; track $index) {
            <option [value]="periodo">{{ periodo }}</option>
          }
        </select>
      </div>

      <!-- Alunos -->
      <div class="campo">
        <label>Selecione os Alunos</label>

        @if (alunosSelecionados().length > 0) {
          <div class="selecionados-container">
            @for (aluno of alunosSelecionados(); track $index) {
              <span class="badge-selecionado">
                {{ aluno.nome }}
                <button type="button" (click)="toggleAlunoSelecao(aluno)">x</button>
              </span>
            }
          </div>
        }

        <div class="campo-pesquisa" (click)="$event.stopPropagation()">
          <input
            placeholder="Pesquisar alunos..."
            [(ngModel)]="alunosPesquisa"
            (input)="filtrarAlunos()"
            (focus)="abrirLista('alunos')"
            name="pesquisaAluno"
          />
          <ul
            class="lista-pesquisa"
            *ngIf="mostrarListaAlunos && alunosFiltrados.length > 0"
          >
            @for (aluno of alunosFiltrados; track $index) {
              <li
                (click)="toggleAlunoSelecao(aluno)"
                [class.selecionado]="isAlunoSelecionado(aluno)"
              >
                {{ aluno.nome }}
              </li>
            }
          </ul>
        </div>
      </div>

      <!-- Professores -->
      <div class="campo">
        <label>Selecione os Professores</label>

        @if (professoresSelecionados().length > 0) {
          <div class="selecionados-container">
            @for (professor of professoresSelecionados(); track $index) {
              <span class="badge-selecionado">
                {{ professor.nome }}
                <button type="button" (click)="toggleProfessorSelecao(professor)">x</button>
              </span>
            }
          </div>
        }

        <div class="campo-pesquisa" (click)="$event.stopPropagation()">
          <input
            placeholder="Pesquisar professores..."
            [(ngModel)]="professoresPesquisa"
            (input)="filtrarProfessores()"
            (focus)="abrirLista('professores')"
            name="pesquisaProfessor"
          />
          <ul
            class="lista-pesquisa"
            *ngIf="mostrarListaProfessores && professoresFiltrados.length > 0"
          >
            @for (professor of professoresFiltrados; track $index) {
              <li
                (click)="toggleProfessorSelecao(professor)"
                [class.selecionado]="isProfessorSelecionado(professor)"
              >
                {{ professor.nome }}
              </li>
            }
          </ul>
        </div>
      </div>

      <!-- Botões -->
      <div class="botoes">
        <button type="button" class="btn-cancelar" (click)="cancelar()">Cancelar</button>
        <button type="button" class="btn-salvar" (click)="criarGrupo()">Criar Grupo</button>
      </div>
    </form>
  </div>
</div>
