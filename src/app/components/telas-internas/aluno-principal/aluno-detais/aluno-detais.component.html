<app-sidebar></app-sidebar>

<!-- ESTADO DE CARREGAMENTO -->
@if (isLoading) {
<div class="state-message">
  <div class="spinner"></div>
  <p class="lead">Carregando dados para edição...</p>
</div>
}

<!-- FORMULÁRIO NO PADRÃO DO CADASTRO DE MENTOR -->
@if (!isLoading && aluno.id) {
<div class="cadastro-container">
  <div class="form-box">

    <h2>Alterar Meus Dados</h2>
    <div class="linha"></div>

    <!-- FORM -->
    <form #alunoForm="ngForm" (ngSubmit)="atualizar()">
      <div class="form-scroll-content">

        <!--DADOS NÃO EDITÁVEIS -->
        <div class="form-step">
          <h3 class="section-title">Informações Acadêmicas (Não Editáveis)</h3>

          <label>Nome Completo</label>
          <input type="text" [value]="aluno.nome" readonly class="readonly-field" />

          <label>RA</label>
          <input type="text" [value]="aluno.ra" readonly class="readonly-field" />

          <label>Curso</label>
          <input type="text" [value]="aluno.curso.nome" readonly class="readonly-field" />
        </div>

        <div class="linha"></div>

        
        <!--CAMPOS EDITÁVEIS --> 
        <div class="form-step">

          <label for="email">Email</label>
          <input
            id="email"
            type="email"
            [(ngModel)]="aluno.email"
            name="email"
            class="form-control"
            required
            #email="ngModel"
          />
          @if (email.invalid && email.touched) {
          <small class="error-message">O e-mail é obrigatório e deve ser válido.</small>
          }

          <label for="senha">Nova Senha</label>
          <input
            id="senha"
            type="password"
            [(ngModel)]="aluno.senha"
            name="senha"
            placeholder="Deixe em branco para manter a senha atual"
          />
          <small class="text-muted">
            A senha só será alterada se você preencher este campo.
          </small>
        </div>
      </div>

      <div class="linha"></div>

      <!-- BOTÕES -->
      <div class="form-buttons-container">
        <div class="buttons-row">
          <button type="button" class="btn-back" (click)="voltar()">Cancelar</button>
          <button type="submit" [disabled]="alunoForm.invalid">Salvar Alterações</button>
        </div>
      </div>
    </form>
  </div>
</div>
}
